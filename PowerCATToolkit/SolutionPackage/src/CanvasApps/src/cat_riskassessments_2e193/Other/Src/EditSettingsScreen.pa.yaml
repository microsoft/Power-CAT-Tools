# ************************************************************************************************
# Warning: YAML source code for Canvas Apps is in preview. The schema is being actively developed.
# Content may be incomplete and subject to change.
# This file is read-only and should only be used to review changes made within Power Apps Studio.
# This file isn't used when loading the app. External editing, merging and conflict resolution are
# not supported.
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  EditSettingsScreen:
    Properties:
      Fill: =RGBA(255, 255, 255, 1)
      LoadingSpinnerColor: =RGBA(0, 120, 212, 1)
      OnHidden: |
        =UpdateContext(
            {
                lblName: "",
                isNameValueChanged: false,
                lblSelectedAssessmentSettingId: Blank(),
                showPane: false,
                iscmbBUChanged: false,
                iscmbOrganizationChanged: false,
                iscmbPCBUChanged: false,
                iscmbUserChanged: false,
                selectedBaseLinePrivilegeRecord: Blank(),
                selectedMiscellanousPrivilege: Blank(),
                selectedTablePrivilege: Blank(),
                isRadioGroupReadOnly: false,
                previousSelectedBaseLinePrivilegeRecord: Blank(),
                showSpinnerForConfirmationDialog: false,
                showPaneFullScreen: false
            }
        );
        Concurrent(
            Set(
                currentSelectedAssessmentSetting,
                Blank()
            ),
            Set(
                isNewButtonClicked,
                false
            ),
            Reset(txtNameInput),
            Clear(col_RiskAssessmentsToBeUpdatedToStale)
        );
      OnVisible: "=/* Load data for this page while spinner is loading */\nIf(\n    init <> true,\n    UpdateContext(\n        {\n            TablePrivilegeText: \"Table privilege\",\n            CapabilityPrivilegeText: \"Capability privilege\"\n        }\n    ),\n    true\n);\nUpdateContext(\n    {\n        lblSelectedAssessmentSettingId: If(\n            isNewButtonClicked,\n            Blank(),\n            currentSelectedAssessmentSetting.'Risk Assessment Setting'\n        ),\n        showLoader: false,\n        isNameUnique: true,\n        showSpinnerForConfirmationDialog: false\n    }\n);\nReset(txtBaselinePrivilegesRatings);\nReset(dpdTables);\nConcurrent(\n    Set(\n        triggerRetrieveEntityDefinitions,\n        !triggerRetrieveEntityDefinitions\n    ),\n    Set(\n        triggerRetrieveMiscellaneousPrivileges,\n        !triggerRetrieveMiscellaneousPrivileges\n    ),\n    Set(\n        dropDownStatusForEditSettings,\n        {\n            Key: 0,\n            TableName: \"All\"\n        }\n    );\n    \n);\nIf(\n    isNewButtonClicked,\n    Set(\n        currentSelectedAssessmentSetting,\n        Blank()\n    ),\n    false\n);\nClearCollect(\n    col_DistinctTablesToFilter_temp,\n    ForAll(\n        Sort(\n            Distinct(\n                ActivePrivilegeRiskBaselinesRelatedToAProfile,\n                Table\n            ),\n            Value,\n            SortOrder.Ascending\n        ),\n        {TableName: ThisRecord.Value}\n    )\n);\nClearCollect(\n    col_DistinctTablesToFilter,\n    ForAll(\n        Sequence(CountRows(col_DistinctTablesToFilter_temp)),\n        Patch(\n            Last(\n                FirstN(\n                    col_DistinctTablesToFilter_temp,\n                    Value\n                )\n            ),\n            {Key: Value}\n        )\n    )\n);\nCollect(\n    col_DistinctTablesToFilter,\n    Table(\n        {\n            Key: 0,\n            TableName: \"All\"\n        }\n    )\n);\nUpdateContext(\n    {\n        init: true,\n        isNameValueChanged: false,\n        lblName: If(\n            isNewButtonClicked,\n            \"\",\n            currentSelectedAssessmentSetting.Name\n        ),\n        showPane: false,\n        showPrivilegeRiskContainer: true,\n        showStaleMessageBar: false\n    }\n);\n"
    Children:
      - cFrame_1:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            DropShadow: =DropShadow.None
            Height: =App.Height
            LayoutDirection: =LayoutDirection.Vertical
            LayoutOverflowY: =LayoutOverflow.Scroll
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Width: =App.Width
          Children:
            - cTopNav_1:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =ColorValue(AppTheme.palette.neutralLighter)
                  FillPortions: =FlexOff
                  Height: =60
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =24
                  PaddingLeft: =20
                  PaddingRight: =20
                  RadiusBottomLeft: =0
                  RadiusBottomRight: =0
                  RadiusTopLeft: =0
                  RadiusTopRight: =0
                  X: =12
                  Y: =20
                Children:
                  - AutoWidthLabel1_5:
                      Control: CodeComponent
                      ComponentName: cat_PowerCAT.AutoWidthLabel
                      Properties:
                        FontSize: =18
                        FontSizeUnits: ='PowerCAT.AutoWidthLabel.FontSizeUnits'.Px
                        FontWeight: ="600"
                        Height: =24
                        Text: =_featureName
                        Tooltip: ="AutoWidthLabel_Desc"
                        Width: =Self.AutoWidth
                  - TabList1_1:
                      Control: TabList@2.2.30
                      Properties:
                        AccessibleLabel: ="EditSettingsScreenTabList"
                        DefaultSelectedItems: =LookUp(Nav, ThisRecord.Screen = SettingsLandingScreen)
                        FillPortions: =FlexOn
                        Items: =Nav
                        OnChange: =Navigate(Self.Selected.Screen);
                      Children:
                        - DisplayName1_1:
                            Control: TabListDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="DisplayName"
                              FieldName: ="DisplayName"
                              FieldType: ="s"
                              Order: =1
                  - Container11_10:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        AlignInContainer: =AlignInContainer.SetByContainer
                        BorderColor: =
                        BorderStyle: =BorderStyle.None
                        DropShadow: =DropShadow.None
                        Height: =Parent.Height
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Horizontal
                        LayoutGap: =8
                        LayoutJustifyContent: =LayoutJustifyContent.End
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                      Children:
                        - LearnIcon_4:
                            Control: CodeComponent
                            ComponentName: cat_PowerCAT.Icon
                            Properties:
                              AccessibilityLabel: =DVAssessmentPageLoc.learnButtonText
                              FontColor: ="#424242"
                              Height: =Parent.Height
                              HoverFillColor: =AppTheme.palette.neutralLight
                              HoverFontColor: ="#424242"
                              HoverIconColor: ="#424242"
                              IconColor: ="#424242"
                              IconName: ="BookAnswers"
                              IconSize: =20
                              OnChange: |-
                                =Launch(
                                    "https://aka.ms/dvacc/riskassess",
                                    {},
                                    LaunchTarget.New
                                )
                              Tooltip: =DVAssessmentPageLoc.learnButtonText
                              Width: =32
                        - QuestionIcon_4:
                            Control: CodeComponent
                            ComponentName: cat_PowerCAT.Icon
                            Properties:
                              AccessibilityLabel: =DVAssessmentPageLoc.helpButtonText
                              FontColor: ="#424242"
                              Height: =Parent.Height
                              HoverFillColor: =AppTheme.palette.neutralLight
                              HoverFontColor: ="#424242"
                              HoverIconColor: ="#424242"
                              IconColor: ="#424242"
                              IconName: ="StatusCircleQuestionMark"
                              IconSize: =28
                              OnChange: |-
                                =Launch(
                                    "https://aka.ms/dvacc/riskassess/help",
                                    {},
                                    LaunchTarget.New
                                )
                              Tooltip: =DVAssessmentPageLoc.helpButtonText
                              Width: =32
                        - BugIcon_4:
                            Control: CodeComponent
                            ComponentName: cat_PowerCAT.Icon
                            Properties:
                              AccessibilityLabel: ="Report a bug"
                              FontColor: ="#424242"
                              Height: =Parent.Height
                              HoverFillColor: =AppTheme.palette.neutralLight
                              HoverFontColor: ="#424242"
                              HoverIconColor: ="#424242"
                              IconColor: ="#424242"
                              IconName: ="Bug"
                              IconSize: =20
                              OnChange: |-
                                =Launch(
                                    "https://aka.ms/dvacc/riskassess/bug",
                                    {},
                                    LaunchTarget.New
                                )
                              Tooltip: ="Report a bug"
                              Width: =32
            - cMainContent_7:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  LayoutDirection: =LayoutDirection.Horizontal
                Children:
                  - ScreenContainer_3:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        Fill: =ColorValue(AppTheme.palette.neutralLighterAlt)
                        FillPortions: =FlexOn
                        Height: =Parent.Height
                        LayoutAlignItems: =LayoutAlignItems.Stretch
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutOverflowY: =LayoutOverflow.Scroll
                        PaddingRight: =Self.PaddingLeft
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =!showPaneFullScreen
                        Width: =Parent.Width
                      Children:
                        - cPageHeaderMain_4:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              BorderColor: =RGBA(0, 0, 0, 0)
                              BorderStyle: =BorderStyle.None
                              DropShadow: =DropShadow.None
                              Fill: =ColorValue(AppTheme.palette.neutralLighterAlt)
                              FillPortions: =0
                              Height: =div_6.Y + 1
                              LayoutDirection: =LayoutDirection.Vertical
                              LayoutGap: =4
                              PaddingLeft: =Min(16, Margins)//Margins-24//If(Self.X = 0, Margins, 0)
                              PaddingRight: =Self.PaddingLeft
                              PaddingTop: =16
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Width: =1181
                              X: =92
                              Y: =40
                            Children:
                              - cPageHeaderTop_2:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Start
                                    DropShadow: =DropShadow.None
                                    FillPortions: =FlexOff
                                    Height: =75
                                    LayoutAlignItems: =LayoutAlignItems.Center
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Width: =Parent.Width- Self.X * 2
                                    X: =68
                                    Y: =52
                                  Children:
                                    - cPageHeaderTitle_4:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          AlignInContainer: =AlignInContainer.SetByContainer
                                          DropShadow: =DropShadow.None
                                          FillPortions: =FlexOn
                                          Height: =cHeaderText_7.Height
                                          LayoutDirection: =LayoutDirection.Horizontal
                                          LayoutGap: =16
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Width: =431
                                          X: =36
                                          Y: =40
                                        Children:
                                          - ButtonCanvas4_7:
                                              Control: Button@0.0.44
                                              Properties:
                                                AccessibleLabel: ="Back"
                                                Appearance: ='ButtonCanvas.Appearance'.Subtle
                                                Icon: ="ArrowLeft"
                                                Layout: ='ButtonCanvas.Layout'.IconOnly
                                                OnSelect: |
                                                  =Back();
                                                  UpdateContext(
                                                      {
                                                          lblName: "",
                                                          isNameValueChanged: false
                                                      }
                                                  );
                                                  Reset(txtNameInput);
                                                Text: =
                                                Width: =32
                                          - cHeaderText_7:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                AlignInContainer: =AlignInContainer.SetByContainer
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =rDivider_PageHeader_7.Y
                                                LayoutDirection: =LayoutDirection.Vertical
                                                LayoutGap: =4
                                                LayoutJustifyContent: =LayoutJustifyContent.Center
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                                Width: =Parent.Width - Self.X
                                                X: =1-1
                                                Y: '=1-1 '
                                              Children:
                                                - h2Title_7:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      Align: ='TextCanvas.Align'.Start
                                                      AlignInContainer: =AlignInContainer.Start
                                                      Height: =36
                                                      Size: =20
                                                      Text: |-
                                                        =If(
                                                            isNewButtonClicked,
                                                            Coalesce(
                                                                lblName,
                                                                "Custom risk profile - " & Now()//DVAssessmentPageLoc.newRiskAssessmentSettingsText
                                                            ),
                                                            lblName
                                                        )
                                                      VerticalAlign: =VerticalAlign.Middle
                                                      Weight: ='TextCanvas.Weight'.Semibold
                                                      Width: =Parent.Width - Self.X * 2
                                                      X: =394.49
                                                - rDivider_PageHeader_7:
                                                    Control: Rectangle@2.3.0
                                                    Properties:
                                                      Fill: =RGBA(0,0,0,0)
                                                      Height: =1
                                                      Width: =Parent.Width - Self.X * 2
                                                      X: =72
                                                      Y: =52
                                    - tlbRight_6:
                                        Control: Toolbar@2.0.5
                                        Properties:
                                          AccessibleLabel: ="Toolbar"
                                          FillPortions: =0.2
                                          Height: =44
                                          Items: |-
                                            =Table(
                                                {
                                                    ItemKey: "cancel",
                                                    ItemDisplayName: DVAssessmentPageLoc.cancelButtonText,
                                                    ItemIconName: "Dismiss",
                                                    ItemAppearance: "Subtle",
                                                    ItemIconStyle: "Regular"
                                                },
                                                {
                                                    ItemKey: "save",
                                                    ItemDisplayName: DVAssessmentPageLoc.saveButtonText,
                                                    ItemIconName: "Save",
                                                    ItemAppearance: "Primary",
                                                    ItemIconStyle: "Regular",
                                                    ItemDisabled: !isNameValueChanged
                                                }
                                            )
                                          OnSelect: "=Switch(\n    Self.Selected.ItemKey,\n    /* Action for Key 'new' */\n    \"save\",\n    UpdateContext(\n        {\n            init: false,\n            spinnerColorForSettings: RGBA(\n                255,\n                255,\n                255,\n                0.7\n            ),\n            spinnerLabelForSettings: DVAssessmentPageLoc.pleaseWaitLoadingText\n        }\n    );\n    If(\n        IsBlankOrError(txtNameInput.Value),\n        Notify(\n            DVAssessmentPageLoc.nameFieldRequiredText,\n            NotificationType.Error,\n            5000\n        ),\n        isNewButtonClicked && IsBlank(DefaultRiskAssessmentSetting) && CountRows(col_temp_prvRisk) <> 33,\n        Notify(\n            DVAssessmentPageLoc.privilegesValidationErrorText,\n            NotificationType.Error,\n            5000\n        ),\n        UpdateContext({postSettingsData: true});\n    );\n    If(\n        postSettingsData,\n        UpdateContext(\n            {\n                init: false,\n                spinnerLabelForSettings: DVAssessmentPageLoc.savingLoaderText\n            }\n        );\n        UpdateContext(\n            {\n                lblSelectedAssessmentSettingId: Patch(\n                    'Risk Assessment Settings',\n                    If(\n                        isNewButtonClicked,\n                        Defaults('Risk Assessment Settings'),\n                        LookUp(\n                            AllRiskAssessmentsSettings,\n                            'Risk Assessment Setting' = lblSelectedAssessmentSettingId\n                        )\n                    ),\n                    {\n                        Name: txtNameInput.Value\n                    }\n                ).'Risk Assessment Setting'\n            }\n        );\n        If(\n     // check if there were any errors when the risk assessment setting was submitted\n            !IsEmpty(Errors('Risk Assessment Settings')),\n     // if true, show any error message\n            Notify(\n                Concat(\n                    Errors('Risk Assessment Settings'),\n                    Column & \": \" & Message\n                ),\n                NotificationType.Error,\n                11111\n            );\n            UpdateContext(\n                {\n                    init: true,\n                    spinnerLabelForSettings: Blank(),\n                    spinnerColorForSettings: Blank()\n                }\n            ),\n            Notify(\n                DVAssessmentPageLoc.saveSettingsSuccessMessage,\n                NotificationType.Success,\n                5000\n            );\n            ClearCollect(\n                col_temp_prvRisk,\n                Table(\n                    {\n                        ItemKey: \"test\",\n                        ItemValue: 0\n                    }\n                )\n            );\n            UpdateContext(\n                {\n                    lblName: txtNameInput.Value,\n                    isNameValueChanged: false\n                }\n            );\n            If(\n                isNewButtonClicked,\n                Set(\n                    isNewButtonClicked,\n                    false\n                ),\n                true\n            );\n        ),\n        true\n    );\n    UpdateContext({postSettingsData: false});\n    UpdateContext(\n        {\n            init: true,\n            spinnerColorForSettings: Blank(),\n            spinnerLabelForSettings: Blank()\n        }\n    );\n    false,\n    \"cancel\",\n    Back();\n    UpdateContext(\n        {\n            lblName: \"\",\n            isNameValueChanged: false\n        }\n    );\n    \n        Reset(txtNameInput);\n    \n    ,\n    /* Default action */\n    false\n)"
                                          Padding: ='Toolbar.Padding'.Large
                                          Width: =cPageHeaderTitle_4.Width/2-180
                                          X: =1020
                              - div_6:
                                  Control: Rectangle@2.3.0
                                  Properties:
                                    AlignInContainer: =AlignStart
                                    Fill: =ColorValue(AppTheme.palette.neutralLight)
                                    Height: =1
                                    Width: =Parent.Width - Self.X * 2
                                    X: =84
                                    Y: =256
                        - MainContainer1_2:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              Fill: =RGBA(255, 255, 255, 1)
                              FillPortions: =FlexOff
                              Height: =Max(div_7.Y, Parent.Height - Self.Y)
                              LayoutAlignItems: =LayoutAlignItems.Stretch
                              LayoutDirection: =LayoutDirection.Vertical
                              LayoutGap: '=0   '
                              PaddingLeft: =Margins-29
                              PaddingRight: =Self.PaddingLeft
                              PaddingTop: =//24
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Width: =Parent.Width - Self.X * 2
                            Children:
                              - EditSettingsMainContainer:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =RGBA(245, 245, 245, 1)
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    Fill: =RGBA(255, 255, 255, 1)
                                    FillPortions: =0
                                    Height: |-
                                      =If(
                                          (EditSettingsScreen.Size = 2 && EditSettingsScreen.Orientation = Layout.Vertical)/*|| (EditSettingsScreen.Size = 3 && EditSettingsScreen.Orientation = Layout.Horizontal) || EditSettingsScreen.Width >= 1400*/,
                                          Parent.Height,
                                        /*  EditSettingsNameContainer.Height + EditSettingsRiskRatingsContainer.Height + EditSettingsRiskLevelContainer.Height + If(
                                              EditSettingsShowMoreContainer.Visible,
                                              EditSettingsShowMoreContainer.Height,
                                              EditSettingsShowLessContainer.Height + 80
                                          ) + 80*/cBuffer_4.Y
                                      )
                                    LayoutDirection: =LayoutDirection.Vertical
                                    LayoutGap: =12
                                    PaddingLeft: =5
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Width: =Parent.Width-100
                                  Children:
                                    - EditSettingsNameContainer:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          AlignInContainer: =AlignInContainer.SetByContainer
                                          BorderColor: =RGBA(255, 255, 255, 1)
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =div_25.Y//80
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =5
                                          PaddingTop: =5
                                          Width: =Parent.Width-20
                                        Children:
                                          - Container12_1:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                AlignInContainer: =AlignInContainer.Start
                                                BorderColor: =RGBA(255, 255, 255, 1)
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =32
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                Width: =Parent.Width
                                              Children:
                                                - NameFieldText:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      Font: =Font.'Segoe UI'
                                                      FontColor: =RGBA(36, 36, 36, 1)
                                                      Text: =DVAssessmentPageLoc.name
                                                      VerticalAlign: =VerticalAlign.Middle
                                                      Weight: ='TextCanvas.Weight'.Semibold
                                                      Width: =50
                                                - RequiredText:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      Font: =Font.'Segoe UI'
                                                      FontColor: =RGBA(177, 14, 28, 1)
                                                      Text: ="*"
                                                      VerticalAlign: =VerticalAlign.Middle
                                          - txtNameInput:
                                              Control: TextInput@0.0.53
                                              Properties:
                                                AccessibleLabel: =DVAssessmentPageLoc.name
                                                Appearance: ='TextInputCanvas.Appearance'.FilledLighter
                                                BasePaletteColor: =RGBA(255,255,255,1)
                                                BorderColor: =RGBA(209, 209, 209, 1)
                                                BorderRadius: =4
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                DisplayMode: =DisplayMode.Edit//If(makeSettingsEditable,DisplayMode.Edit,DisplayMode.Disabled)
                                                Font: =Font.'Segoe UI'
                                                FontSize: =14
                                                FontWeight: =FontWeight.Normal
                                                OnChange: |
                                                  =UpdateContext({lblName: txtNameInput.Value});
                                                  UpdateContext(
                                                      {
                                                          isNameUnique: If(
                                                              CountRows(
                                                                  Filter(
                                                                      'Risk Assessment Settings',
                                                                      'Risk Assessment Setting' <> lblSelectedAssessmentSettingId && Name = txtNameInput.Value
                                                                  )
                                                              ) > 0,
                                                              false,
                                                              true
                                                          )
                                                      }
                                                  );
                                                  If(
                                                      !isNameUnique,
                                                      UpdateContext({isNameValueChanged: false}),
                                                      If(
                                                          isNewButtonClicked,
                                                          If(
                                                              IsBlankOrError(txtNameInput.Value),
                                                              UpdateContext({isNameValueChanged: false}),
                                                              UpdateContext({isNameValueChanged: true})
                                                          ),
                                                          If(
                                                              currentSelectedAssessmentSetting.Name <> txtNameInput.Value,
                                                              UpdateContext({isNameValueChanged: true}),
                                                              UpdateContext({isNameValueChanged: false})
                                                          );
                                                      )
                                                  );
                                                Required: =true
                                                TriggerOutput: ='TextInputCanvas.TriggerOutput'.Keypress
                                                Value: =If(isNewButtonClicked=true,Coalesce(lblName, "Custom risk profile - " & Now()),lblName)
                                                Width: =If(EditSettingsScreen.Size=1,Parent.Width,320)
                                          - CompareSecurityRolesText_1:
                                              Control: Text@0.0.50
                                              Properties:
                                                AutoHeight: =true
                                                Font: =Font.'Segoe UI'
                                                FontColor: =RGBA(177, 14, 28, 1)
                                                Height: =40//If(EditSettingsScreen.Size=1,88,40)
                                                Text: ="Profile with this name already exists, please choose a different name."
                                                VerticalAlign: =VerticalAlign.Top
                                                Visible: =!isNameUnique
                                                Weight: ='TextCanvas.Weight'.Regular
                                                Width: =Parent.Width-20
                                          - div_25:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="buffer"
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                TabIndex: =0
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - EditSettingsRiskRatingsContainer:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          AlignInContainer: =AlignInContainer.SetByContainer
                                          BorderColor: =RGBA(255, 255, 255, 1)
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =If(EditSettingsScreen.Size=1,120,80)
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =5
                                          PaddingTop: =5
                                          Width: =Parent.Width-20
                                        Children:
                                          - RiskRatingsText:
                                              Control: Text@0.0.50
                                              Properties:
                                                Font: =Font.'Segoe UI'
                                                FontColor: =RGBA(36, 36, 36, 1)
                                                Text: =DVAssessmentPageLoc.riskRatingsColumn
                                                VerticalAlign: =VerticalAlign.Middle
                                                Weight: ='TextCanvas.Weight'.Semibold
                                                Width: =Parent.Width-20
                                          - CompareSecurityRolesText:
                                              Control: Text@0.0.50
                                              Properties:
                                                Font: =Font.'Segoe UI'
                                                FontColor: =RGBA(36, 36, 36, 1)
                                                Height: =If(EditSettingsScreen.Size=1,88,40)
                                                Text: ="Determine the risk for each privilege and table at every access level."//DVAssessmentPageLoc.compareSecurityRolesPrivileges
                                                VerticalAlign: =VerticalAlign.Top
                                                Weight: ='TextCanvas.Weight'.Regular
                                                Width: =Parent.Width-20
                                    - cSubgrid_2:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          AlignInContainer: =AlignInContainer.Start
                                          BorderColor: =RGBA(0, 0, 0, 0)
                                          BorderThickness: =1
                                          Fill: =RGBA(255, 255, 255, 1)
                                          FillPortions: =FlexOff
                                          Height: =Max(div_14.Y, 120)
                                          LayoutAlignItems: =LayoutAlignItems.Stretch
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: '=0   '
                                          LayoutMinWidth: =600
                                          PaddingTop: =
                                          RadiusBottomLeft: =8
                                          RadiusBottomRight: =8
                                          RadiusTopLeft: =8
                                          RadiusTopRight: =8
                                          Width: =Parent.Width - Self.X * 2
                                        Children:
                                          - cListToolbar_9:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                AlignInContainer: =AlignInContainer.Start
                                                DropShadow: =DropShadow.None
                                                Fill: =ColorValue(AppTheme.palette.neutralLighter) //RGBA(0, 0, 0, 0)
                                                FillPortions: =0
                                                Height: =48
                                                LayoutAlignItems: =LayoutAlignItems.Center
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                LayoutGap: =8
                                                PaddingLeft: =16
                                                PaddingRight: =16
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                                Width: =Parent.Width
                                              Children:
                                                - Toolbar1_8:
                                                    Control: Toolbar@2.0.5
                                                    Properties:
                                                      AccessibleLabel: ="Toolbar"
                                                      FillPortions: =FlexOn
                                                      Height: =44
                                                      Items: |-
                                                        =Table(
                                                            {
                                                                ItemKey: "new",
                                                                ItemDisplayName: "New risk rating",
                                                                // Need LOC
                                                                ItemIconName: "Add",
                                                                ItemAppearance: "Subtle",
                                                                ItemIconStyle: "Regular",
                                                                ItemTooltip: "Add new item",
                                                                ItemDisabled: false
                                                            },
                                                            {
                                                                ItemKey: "delete",
                                                                ItemDisplayName: "Delete",
                                                                ItemIconName: "Delete",
                                                                ItemAppearance: "Subtle",
                                                                ItemIconStyle: "Regular",
                                                                ItemVisible: !IsEmpty(PrivilegeRiskBaselineList.SelectedItems)
                                                            },
                                                            {
                                                                ItemKey: "refresh",
                                                                ItemDisplayName: "Refresh",
                                                                ItemIconName: "ArrowClockwise",
                                                                ItemAppearance: "Subtle",
                                                                ItemIconStyle: "Regular"
                                                            }
                                                        )
                                                      LayoutMinWidth: =100
                                                      OnSelect: "=Switch(\n    Self.Selected.ItemKey,\n    /* Action for Key 'new' */\n    \"new\",\n    Select(btnNewRiskRating);\n    ,\n    /* Action for 'refresh' */\n    \"refresh\",\n    UpdateContext({showLoader: true});\n    Refresh('Risk Assessment Settings');\n    Refresh('Privilege Risk Baselines');\n    UpdateContext({showLoader: false});\n    ,\n    \"delete\",\n    UpdateContext({showDeleteConfirmationDialog: true}),\n    /* Default action */\n    Notify(\"Unrecognized button clicked\");\n    \n)"
                                                      Width: =301
                                                      X: =25
                                                - Container9_12:
                                                    Control: GroupContainer@1.3.0
                                                    Variant: AutoLayout
                                                    Properties:
                                                      DropShadow: =DropShadow.None
                                                      FillPortions: =FlexOn+1
                                                      Height: =40
                                                      LayoutAlignItems: =LayoutAlignItems.Center
                                                      LayoutDirection: =LayoutDirection.Horizontal
                                                      LayoutGap: =8
                                                      LayoutJustifyContent: =LayoutJustifyContent.End
                                                      LayoutMinHeight: =32
                                                      PaddingLeft: =2
                                                      PaddingRight: =2
                                                      RadiusBottomLeft: =0
                                                      RadiusBottomRight: =0
                                                      RadiusTopLeft: =0
                                                      RadiusTopRight: =0
                                                    Children:
                                                      - TextCanvas5_10:
                                                          Control: Text@0.0.50
                                                          Properties:
                                                            Align: ='TextCanvas.Align'.End
                                                            PaddingRight: =8
                                                            Text: |-
                                                              =With({c: CountIf(ActivePrivilegeRiskBaselinesRelatedToAProfile,true)},$"{ c } {If(c = 1, "item", "items")}")
                                                            VerticalAlign: =VerticalAlign.Middle
                                                            Weight: ='TextCanvas.Weight'.Semibold
                                                      - Icon1_10:
                                                          Control: Classic/Icon@2.5.0
                                                          Properties:
                                                            AccessibleLabel: =DVAssessmentPageLoc.search
                                                            BorderColor: =RGBA(0, 0, 0, 0)
                                                            Color: =RGBA(0, 120, 212, 1)
                                                            DisabledColor: =RGBA(220, 220, 220, 1)
                                                            DisabledFill: =RGBA(0, 0, 0, 0)
                                                            Height: =32
                                                            HoverBorderColor: =RGBA(0, 0, 0, 0)
                                                            HoverColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                                                            HoverFill: =RGBA(0, 0, 0, 0)
                                                            Icon: =If(showSearch, Icon.Cancel, Icon.Search)
                                                            OnSelect: |-
                                                              =UpdateContext({showSearch: !showSearch})
                                                            PaddingBottom: =8
                                                            PaddingLeft: =8
                                                            PaddingRight: =8
                                                            PaddingTop: =8
                                                            PressedBorderColor: =RGBA(0, 0, 0, 0)
                                                            PressedColor: =ColorFade(RGBA(0, 120, 212, 1), -30%)
                                                            PressedFill: =RGBA(0, 0, 0, 0)
                                                            TabIndex: =0
                                                            Visible: =App.ActiveScreen.Size <= ScreenSize.Small
                                                            Width: =32
                                                      - dpdTables:
                                                          Control: DropDown@0.0.44
                                                          Properties:
                                                            AccessibleLabel: ="TableDropdown"
                                                            DefaultSelectedItems: |-
                                                              =If(
                                                                  IsBlankOrError(dropDownStatusForEditSettings),
                                                                  First(
                                                                      Filter(
                                                                          col_DistinctTablesToFilter,
                                                                          Key = 0
                                                                      )
                                                                  ),
                                                                  dropDownStatusForEditSettings
                                                              )
                                                            Items: =Sort(col_DistinctTablesToFilter,Key,SortOrder.Ascending)
                                                            OnChange: |-
                                                              =Set(
                                                                  dropDownStatusForEditSettings,
                                                                  Self.Selected
                                                              );
                                                            Width: =94
                                                            X: =294
                                                          Children:
                                                            - TableName1:
                                                                Control: DropDownDataField@1.5.0
                                                                Variant: textualColumn
                                                                IsLocked: true
                                                                Properties:
                                                                  FieldDisplayName: ="TableName"
                                                                  FieldName: ="TableName"
                                                                  FieldType: ="s"
                                                                  Order: =1
                                                      - cSearchTeams_4:
                                                          Control: GroupContainer@1.3.0
                                                          Variant: AutoLayout
                                                          Properties:
                                                            AlignInContainer: =AlignInContainer.SetByContainer
                                                            BorderColor: =ColorValue(AppTheme.palette.neutralQuaternary)
                                                            BorderStyle: =BorderStyle.None
                                                            FillPortions: =0
                                                            Height: =32
                                                            LayoutAlignItems: =LayoutAlignItems.Center
                                                            LayoutDirection: =LayoutDirection.Horizontal
                                                            Visible: =App.ActiveScreen.Size > ScreenSize.Small || showSearch
                                                            Width: =200
                                                          Children:
                                                            - txtBaselinePrivilegesRatings:
                                                                Control: TextInput@0.0.53
                                                                Properties:
                                                                  AccessibleLabel: =DVAssessmentPageLoc.search
                                                                  Appearance: ='TextInputCanvas.Appearance'.FilledLighter
                                                                  FillPortions: =1
                                                                  LayoutMinWidth: =100
                                                                  Placeholder: ="Search"
                                                                  TriggerOutput: ='TextInputCanvas.TriggerOutput'.Keypress
                                                                  Type: ='TextInputCanvas.Type'.Search
                                          - Spinner1_9:
                                              Control: Spinner@1.4.6
                                              Properties:
                                                AccessibleLabel: ="Spinner"
                                                SpinnerSize: ='Spinner.SpinnerSize'.Small
                                                Visible: =showLoader
                                          - cEmptyState_5:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                AlignInContainer: =AlignInContainer.Center
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =314
                                                LayoutAlignItems: =LayoutAlignItems.Center
                                                LayoutDirection: =LayoutDirection.Vertical
                                                LayoutGap: =8
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                                Visible: =IsEmpty(ActivePrivilegeRiskBaselinesRelatedToAProfile)
                                                Width: =333
                                                X: =469
                                                Y: =93
                                              Children:
                                                - Image3_5:
                                                    Control: Image@2.2.3
                                                    Properties:
                                                      AccessibleLabel: ="Image"
                                                      BorderColor: =RGBA(0, 0, 0, 0)
                                                      BorderStyle: =BorderStyle.None
                                                      BorderThickness: =2
                                                      DisabledBorderColor: =RGBA(0, 0, 0, 0)
                                                      DisabledFill: =RGBA(0, 0, 0, 0)
                                                      HoverBorderColor: =RGBA(0, 0, 0, 0)
                                                      HoverFill: =RGBA(0, 0, 0, 0)
                                                      Image: ='Empty states'
                                                      PressedBorderColor: =RGBA(0, 0, 0, 0)
                                                      PressedFill: =RGBA(0, 0, 0, 0)
                                                      TabIndex: =0
                                                - txtSubtitle1_EmptyState_4:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      Align: ='TextCanvas.Align'.Center
                                                      AlignInContainer: =AlignInContainer.Center
                                                      FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                      Height: =36
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =20
                                                      Text: ="No privileges"
                                                      Weight: ='TextCanvas.Weight'.Semibold
                                                      Width: =250
                                                      Wrap: =false
                                                      X: =40
                                                      Y: =193
                                                - lblBody1_EmptyState_4:
                                                    Control: FluentV8/Label@1.8.6
                                                    Properties:
                                                      AlignInContainer: =AlignInContainer.Center
                                                      Alignment: =Align.Center
                                                      AutoHeight: =true
                                                      Color: =ColorValue(AppTheme.palette.neutralPrimaryAlt)
                                                      FontWeight: =FontWeight.Normal
                                                      Height: =12
                                                      Text: ="Identify privileges that must be blocked at some access level"
                                                      VerticalAlignment: =VerticalAlign.Middle
                                                      X: =320
                                                      Y: =197
                                                - Container9_4:
                                                    Control: GroupContainer@1.3.0
                                                    Variant: AutoLayout
                                                    Properties:
                                                      AlignInContainer: =AlignInContainer.Start
                                                      DropShadow: =DropShadow.None
                                                      FillPortions: =0
                                                      Height: =44
                                                      LayoutAlignItems: =LayoutAlignItems.Center
                                                      LayoutDirection: =LayoutDirection.Horizontal
                                                      LayoutGap: =8
                                                      LayoutJustifyContent: =LayoutJustifyContent.Center
                                                      RadiusBottomLeft: =0
                                                      RadiusBottomRight: =0
                                                      RadiusTopLeft: =0
                                                      RadiusTopRight: =0
                                                      Width: =Parent.Width
                                                    Children:
                                                      - btnNewRiskRating:
                                                          Control: Button@0.0.44
                                                          Properties:
                                                            AccessibleLabel: ="New risk rating"
                                                            Appearance: ='ButtonCanvas.Appearance'.Primary
                                                            Font: =
                                                            Layout: ='ButtonCanvas.Layout'.IconBefore
                                                            OnSelect: |
                                                              =Concurrent(
                                                                  Reset(cmbTables),
                                                                  Reset(RadioGroupPrivilegeType)
                                                              );
                                                              UpdateContext(
                                                                  {
                                                                      isRadioGroupReadOnly: false,
                                                                      showPane: true,
                                                                      showPrivilegeRiskContainer: true,
                                                                      showSelectedPrivilege: false,
                                                                      selectedTablePrivilege: Blank(),
                                                                      selectedBaseLinePrivilegeRecord: Blank()
                                                                  }
                                                              );
                                                            Text: ="New risk rating"
                                                            Width: =132
                                                            X: =542
                                          - div_14:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="buffer"
                                                AlignInContainer: =AlignStart
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                TabIndex: =0
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - cBuffer_4:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutMinHeight: =10
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Width: =Parent.Width
                              - div_7:
                                  Control: Rectangle@2.3.0
                                  Properties:
                                    Fill: =RGBA(0,0,0,0)
                                    Height: =2
                                    Width: =Parent.Width - Self.X * 2
                                    X: =84
                                    Y: =256
                  - cPane_1:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =ColorValue(AppTheme.palette.white)
                        FillPortions: =If(showPaneFullScreen,FlexOn,FlexOff)
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutOverflowY: =LayoutOverflow.Scroll
                        PaddingBottom: =16
                        PaddingLeft: =16
                        PaddingRight: =16
                        PaddingTop: =16
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =showPane <> false //|| !IsBlank(PrivilegeRiskBaselineList.Selected)
                        Width: =430//320
                      Children:
                        - cCardTitle_2:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =32
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =8
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =showPrivilegeRiskContainer
                              Width: =Parent.Width
                              X: =1-1
                              Y: =1-1
                            Children:
                              - TextCanvas1_9:
                                  Control: Text@0.0.50
                                  Properties:
                                    FillPortions: =FlexOn
                                    Height: =24
                                    Size: =16
                                    Text: ="Define privilege risk"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Wrap: =false
                              - ButtonCanvas5:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Dismiss"
                                    Appearance: ='ButtonCanvas.Appearance'.Subtle
                                    Icon: ="Dismiss"
                                    OnSelect: |-
                                      =UpdateContext(
                                          {
                                              ctxTableEvent: "ClearSelection" & Text(Rand()),
                                              showPane: false
                                          }
                                      );
                                    Text: =
                                    Visible: =false
                                    Width: =32
                        - PrivilegeRiskInfoContainer:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              Height: =cBuffer_9.Y
                              LayoutDirection: =LayoutDirection.Vertical
                              LayoutGap: =12
                              LayoutOverflowY: =LayoutOverflow.Scroll
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =showPrivilegeRiskContainer
                            Children:
                              - txtPrivilegeRisk:
                                  Control: Text@0.0.50
                                  Properties:
                                    Align: ='TextCanvas.Align'.Start
                                    AlignInContainer: =AlignInContainer.Stretch
                                    AutoHeight: =true
                                    FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                    Height: =LookUp(_typeramp,name="Body1").lineHeight
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =LookUp(_typeramp,name="Body1").fontSize
                                    Text: ="Specify the risk level associated with a privilege across different access levels. Adjustments here determine whether a role privilege is allowed or flagged during an assessment based on the risk associated with it's access level."
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                    Width: =250
                                    X: =7
                                    Y: =188
                              - Container23:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =20
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                  Children:
                                    - txtPrivilegeType:
                                        Control: Text@0.0.50
                                        Properties:
                                          FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                          Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                          Text: ="Privilege type"
                                          Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                          Width: =90
                                          Wrap: =false
                                          X: =7
                                          Y: =223
                                    - txtPrivilegeTypeRequired:
                                        Control: Text@0.0.50
                                        Properties:
                                          FillPortions: =1
                                          FontColor: =RGBA(177, 14, 28, 1)
                                          Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                          Text: ="*"
                                          Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                          Width: =250
                                          Wrap: =false
                                          X: =7
                                          Y: =223
                              - RadioGroupPrivilegeType:
                                  Control: FluentV8/Radio@1.4.7
                                  Properties:
                                    AccessibleLabel: ="Privilege type"
                                    AlignInContainer: =AlignInContainer.Start
                                    DefaultSelectedItems: |-
                                      =If(
                                          IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                          If(
                                              IsBlankOrError(previousSelectedBaseLinePrivilegeRecord),
                                              {Value: TablePrivilegeText},
                                              {Value: previousSelectedBaseLinePrivilegeRecord.Type & " privilege"}
                                          ),
                                          {Value: selectedBaseLinePrivilegeRecord.Type & " privilege"}
                                      )
                                    DisplayMode: =If(isRadioGroupReadOnly,DisplayMode.Disabled,DisplayMode.Edit)
                                    Height: =80
                                    Items: =[CapabilityPrivilegeText,TablePrivilegeText]
                                    OnChange: |
                                      =Concurrent(
                                          Reset(cmbTables),
                                          Reset(cmbOrganization),
                                          Reset(cmbPCBU),
                                          Reset(cmbBU),
                                          Reset(cmbUser),
                                          UpdateContext(
                                              {
                                                  showSelectedPrivilege: false,
                                                  selectedMiscellanousPrivilege: Blank(),
                                                  selectedTablePrivilege: Blank(),
                                                  selectedBaseLinePrivilegeRecord: Blank()
                                              }
                                          )
                                      );
                                    Width: =Parent.Width
                                  Children:
                                    - Value2:
                                        Control: FluentV8/RadioDataField@1.5.0
                                        Variant: textualColumn
                                        IsLocked: true
                                        Properties:
                                          FieldDisplayName: ="Value"
                                          FieldName: ="Value"
                                          FieldType: ="s"
                                          Order: =1
                              - TableInfoContainer:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =div_21.Y
                                    LayoutDirection: =LayoutDirection.Vertical
                                    LayoutGap: =8
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =RadioGroupPrivilegeType.Selected.Value=TablePrivilegeText
                                  Children:
                                    - TableTextContainer:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =20
                                          LayoutDirection: =LayoutDirection.Horizontal
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                        Children:
                                          - txtTable:
                                              Control: Text@0.0.50
                                              Properties:
                                                FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                PaddingBottom: =0
                                                PaddingLeft: =0
                                                PaddingRight: =0
                                                PaddingTop: =0
                                                Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                Text: ="Table"
                                                Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                Width: =38
                                                Wrap: =false
                                                X: =7
                                                Y: =223
                                          - txtPrivilegeTypeRequired_1:
                                              Control: Text@0.0.50
                                              Properties:
                                                FontColor: =RGBA(177, 14, 28, 1)
                                                Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                PaddingBottom: =0
                                                PaddingLeft: =0
                                                PaddingRight: =0
                                                PaddingTop: =0
                                                Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                Text: ="*"
                                                Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                Width: =10
                                                Wrap: =false
                                                X: =7
                                                Y: =223
                                          - InfoButtonCanvas1_6:
                                              Control: InfoButton@0.0.31
                                              Properties:
                                                AccessibleLabel: ="Info"
                                                Content: ="Choose the entity for which you want to assign a privilege. The selected entity determines which records and data objects the privilege will apply to. Ensure you select the correct entity to configure the appropriate access rights."
                                                Height: =20
                                                Width: =20
                                    - cmbTables:
                                        Control: ComboBox@0.0.49
                                        Properties:
                                          AccessibleLabel: ="Tables list"
                                          AlignInContainer: =AlignInContainer.Stretch
                                          Appearance: ='ComboboxCanvas.Appearance'.FilledLighter
                                          BorderColor: =RGBA(209, 209, 209, 1)
                                          BorderStyle: =BorderStyle.Solid
                                          BorderThickness: =1
                                          DefaultSelectedItems: |-
                                            =If(
                                                IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                Blank(),
                                                Filter(
                                                    EntityDisplayNames,
                                                    EntityDisplayName = selectedBaseLinePrivilegeRecord.Table
                                                )
                                            )
                                          DisplayMode: |-
                                            =If(
                                                IsBlankOrError(RadioGroupPrivilegeType.Selected.Value) || RadioGroupPrivilegeType.Selected.Value=CapabilityPrivilegeText,
                                                DisplayMode.Disabled,
                                                DisplayMode.Edit
                                            )
                                          Font: =Font.'Segoe UI'
                                          Items: |-
                                            =Sort(
                                                If(
                                                    IsBlankOrError(cmbTables.SearchText),
                                                    EntityDisplayNames,
                                                    Filter(
                                                        EntityDisplayNames,
                                                        StartsWith(
                                                            EntityDisplayName,
                                                            Self.SearchText
                                                        )
                                                    )
                                                ),
                                                EntityDisplayName,
                                                SortOrder.Ascending
                                            )
                                          OnChange: |
                                            =UpdateContext(
                                                {
                                                    showSelectedPrivilege: false,
                                                    selectedBaseLinePrivilegeRecord: Blank()
                                                }
                                            );
                                            ClearCollect(
                                                TableRelatedPrivileges,
                                                AddColumns(
                                                    ForAll(
                                                        First(
                                                            Filter(
                                                                EntityDisplayNames,
                                                                MetadataId = Self.Selected.MetadataId
                                                            )
                                                        ).EntityPrivileges,
                                                        {
                                                            CanBeBasic: ThisRecord.CanBeBasic,
                                                            PrivilegeId: ThisRecord.PrivilegeId,
                                                            CanBeDeep: ThisRecord.CanBeDeep,
                                                            CanBeGlobal: ThisRecord.CanBeGlobal,
                                                            CanBeLocal: ThisRecord.CanBeLocal,
                                                            PrivilegeName: Text(ThisRecord.PrivilegeName),
                                                            PrivilegeDisplayName: Text(
                                                                Substitute(
                                                                    ThisRecord.PrivilegeName,
                                                                    "prv",
                                                                    ""
                                                                )
                                                            ),
                                                            TableDisplayName: Text(Self.Selected.EntityDisplayName),
                                                            TableLogicalName: Text(Self.Selected.EntityLogicalName)
                                                        }
                                                    ),
                                                    PrivilegeFinalDisplayName,
                                                    Text(
                                                        If(
                                                            CountRows(
                                                                Filter(
                                                                    PrivilegesNames,
                                                                    ThisRecord.Value exactin PrivilegeDisplayName
                                                                )
                                                            ) > 1,
                                                            Index(
                                                                Filter(
                                                                    PrivilegesNames,
                                                                    ThisRecord.Value exactin PrivilegeDisplayName
                                                                ),
                                                                2
                                                            ).Value,
                                                            LookUp(
                                                                PrivilegesNames,
                                                                ThisRecord.Value exactin PrivilegeDisplayName
                                                            ).Value
                                                        ) & " " & Self.Selected.EntityDisplayName
                                                    ),
                                                    RecordSelected,
                                                    false
                                                )
                                            );
                                        Children:
                                          - EntityDisplayName1:
                                              Control: ComboBoxDataField@1.5.0
                                              Variant: textualColumn
                                              IsLocked: true
                                              Properties:
                                                FieldDisplayName: ="EntityDisplayName"
                                                FieldName: ="EntityDisplayName"
                                                FieldType: ="O"
                                                Order: =1
                                          - EntityLogicalName1:
                                              Control: ComboBoxDataField@1.5.0
                                              Variant: textualColumn
                                              IsLocked: true
                                              Properties:
                                                FieldDisplayName: ="EntityLogicalName"
                                                FieldName: ="EntityLogicalName"
                                                FieldType: ="O"
                                                Order: =2
                                          - MetadataId1:
                                              Control: ComboBoxDataField@1.5.0
                                              Variant: textualColumn
                                              IsLocked: true
                                              Properties:
                                                FieldDisplayName: ="MetadataId"
                                                FieldName: ="MetadataId"
                                                FieldType: ="g"
                                                Order: =3
                                          - EntityPrivileges1:
                                              Control: ComboBoxDataField@1.5.0
                                              Variant: textualColumn
                                              IsLocked: true
                                              Properties:
                                                FieldDisplayName: ="EntityPrivileges"
                                                FieldName: ="EntityPrivileges"
                                                FieldType: ="*[CanBeBasic:b, CanBeDeep:b, CanBeGlobal:b, CanBeLocal:b, PrivilegeId:g, PrivilegeName:O, PrivilegeType:O]"
                                                Order: =4
                                    - div_21:
                                        Control: Rectangle@2.3.0
                                        Properties:
                                          AccessibleLabel: ="Buffer height"
                                          Fill: =RGBA(0,0,0,0)
                                          Height: =2
                                          TabIndex: =0
                                          Width: =Parent.Width - Self.X * 2
                                          X: =84
                                          Y: =256
                              - Container25:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =20
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    RadiusTopLeft: =
                                  Children:
                                    - txtPrivilege:
                                        Control: Text@0.0.50
                                        Properties:
                                          FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                          Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                          Text: ="Privilege"
                                          Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                          Width: =60
                                          Wrap: =false
                                          X: =7
                                          Y: =223
                                    - txtPrivilegeTypeRequired_2:
                                        Control: Text@0.0.50
                                        Properties:
                                          FillPortions: =1
                                          FontColor: =RGBA(177, 14, 28, 1)
                                          Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                          Text: ="*"
                                          Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                          Width: =250
                                          Wrap: =false
                                          X: =7
                                          Y: =223
                              - txtSelectPrivilege:
                                  Control: Text@0.0.50
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Stretch
                                    FontColor: =RGBA(97, 97, 97, 1)//ColorValue(AppTheme.palette.neutralPrimary)
                                    Height: =LookUp(_typeramp,name="Caption1").lineHeight
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =LookUp(_typeramp,name="Caption1").fontSize
                                    Text: ="Select a privilege to define its risk level. "
                                    Visible: =btnSelectPrivilege.Visible
                                    Weight: =LookUp(_typeramp,name="Caption1").fontWeight
                                    Width: =250
                                    Wrap: =false
                                    X: =7
                                    Y: =94
                              - btnSelectPrivilege:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Select"
                                    Appearance: ='ButtonCanvas.Appearance'.Outline
                                    DisplayMode: |-
                                      =If(
                                          IsBlankOrError(Text(cmbTables.Selected.EntityLogicalName)) && RadioGroupPrivilegeType.Selected.Value<>CapabilityPrivilegeText,
                                          DisplayMode.Disabled,
                                          DisplayMode.Edit
                                      )
                                    Icon: ="Add"
                                    OnSelect: |
                                      =If(
                                          CountRows(
                                              Filter(
                                                  TableRelatedPrivileges,
                                                  RecordSelected = true
                                              )
                                          ) > 0,
                                          ForAll(
                                              Filter(
                                                  TableRelatedPrivileges,
                                                  RecordSelected = true
                                              ),
                                              Patch(
                                                  LookUp(
                                                      TableRelatedPrivileges,
                                                      RecordSelected = true
                                                  ),
                                                  {RecordSelected: false}
                                              );
                                          ),
                                          false
                                      );
                                      UpdateContext({showPrivilegeRiskContainer: false});
                                    Text: ="Select"
                                    Visible: =!showSelectedPrivilege //|| RadioGroupPrivilegeType.Selected.Value=CapabilityPrivilegeText
                              - Container11:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =35
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =showSelectedPrivilege //&& RadioGroupPrivilegeType.Selected.Value=TablePrivilegeText
                                  Children:
                                    - txtBody1_1:
                                        Control: Text@0.0.50
                                        Properties:
                                          FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                          Height: =LookUp(_typeramp,name="Body1").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1").fontSize
                                          Text: |-
                                            =If(
                                                !IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                selectedBaseLinePrivilegeRecord.Name,
                                                If(
                                                    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                    selectedTablePrivilege.PrivilegeFinalDisplayName,
                                                    selectedMiscellanousPrivilege.DisplayName
                                                )
                                            )
                                          Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                          Width: =250
                                          Wrap: =false
                                          X: =7
                                          Y: =188
                                    - btnEditSelectPrivilege:
                                        Control: Button@0.0.44
                                        Properties:
                                          AccessibleLabel: ="Edit privilege"
                                          Appearance: ='ButtonCanvas.Appearance'.Outline
                                          Icon: ="Edit"
                                          Layout: ='ButtonCanvas.Layout'.IconOnly
                                          OnSelect: |
                                            =UpdateContext(
                                                {
                                                    ctxTableEvent: "SetFocusOnRowSetSelection" & Text(Rand()),
                                                    showPrivilegeRiskContainer: false
                                                }
                                            );
                                          Width: =30
                              - Container23_2:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =20
                                    LayoutDirection: =LayoutDirection.Horizontal
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                  Children:
                                    - txtRiskRatings:
                                        Control: Text@0.0.50
                                        Properties:
                                          FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                          Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                          PaddingBottom: =0
                                          PaddingLeft: =0
                                          PaddingRight: =0
                                          PaddingTop: =0
                                          Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                          Text: ="Risk ratings"
                                          VerticalAlign: =VerticalAlign.Middle
                                          Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                          Width: =75
                                          Wrap: =false
                                          X: =7
                                          Y: =223
                                    - InfoButtonCanvas1_8:
                                        Control: InfoButton@0.0.31
                                        Properties:
                                          AccessibleLabel: ="Info"
                                          Content: ="Set the baseline risk ratings for each access level to define the standard for compliance. Choose ""No Risk"" for an access level to indicate that it complies with your security policies and does not pose any risk."
                                          Height: =20
                                          Width: =20
                              - txtAccessLevels:
                                  Control: Text@0.0.50
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Stretch
                                    FontColor: =RGBA(97, 97, 97, 1)//ColorValue(AppTheme.palette.neutralPrimary)
                                    Height: =LookUp(_typeramp,name="Caption1").lineHeight
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =LookUp(_typeramp,name="Caption1").fontSize
                                    Text: ="Select a privilege to load access levels."
                                    Visible: =btnSelectPrivilege.Visible
                                    Weight: =LookUp(_typeramp,name="Caption1").fontWeight
                                    Width: =250
                                    Wrap: =false
                                    X: =7
                                    Y: =94
                              - PrivilegeRiskRatingsContainer:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    BorderColor: =
                                    BorderStyle: =BorderStyle.None
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =cBuffer_10.Y
                                    LayoutDirection: =LayoutDirection.Vertical
                                    LayoutGap: =12
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Visible: =!btnSelectPrivilege.Visible
                                  Children:
                                    - Container31:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =div_8.Y
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =8
                                          Visible: |-
                                            =If(
                                                !IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                If(
                                                    selectedBaseLinePrivilegeRecord.'Can Be Global' = 'Can Be Global (Privilege Risk Baselines)'.Yes,
                                                    true,
                                                    false
                                                ),
                                                If(
                                                    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                    selectedTablePrivilege.CanBeGlobal,
                                                    selectedMiscellanousPrivilege.CanBeGlobal
                                                )
                                            )
                                        Children:
                                          - Container23_3:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                BorderColor: =
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =20
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                              Children:
                                                - txtTable_1:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="Organization"
                                                      Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                                      Width: =90
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - txtPrivilegeTypeRequired_3:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =RGBA(177, 14, 28, 1)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="*"
                                                      Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                      Width: =10
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - InfoButtonCanvas1_9:
                                                    Control: InfoButton@0.0.31
                                                    Properties:
                                                      AccessibleLabel: ="Info"
                                                      Content: ="Access to all records across the entire Dataverse environment."
                                                      Height: =20
                                                      Width: =20
                                          - cmbOrganization:
                                              Control: ComboBox@0.0.49
                                              Properties:
                                                AccessibleLabel: ="Organization risk ratings"
                                                AlignInContainer: =AlignInContainer.Stretch
                                                Appearance: ='ComboboxCanvas.Appearance'.FilledLighter
                                                BorderColor: =RGBA(209, 209, 209, 1)
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                DefaultSelectedItems: |-
                                                  =If(
                                                      IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                      Filter(
                                                          Choices('Organization (Privilege Risk Baselines)'),
                                                          Value = 'Organization (Privilege Risk Baselines)'.Critical
                                                      ),
                                                      Filter(
                                                          Choices('Organization (Privilege Risk Baselines)'),
                                                          Value = LookUp(
                                                              'Privilege Risk Baselines',
                                                              'Privilege Risk Baseline' = selectedBaseLinePrivilegeRecord.'Privilege Risk Baseline'
                                                          ).Organization
                                                      )
                                                  )
                                                Font: =Font.'Segoe UI'
                                                Items: =Sort(Choices('Organization (Privilege Risk Baselines)'),Value,SortOrder.Descending)
                                                OnChange: |
                                                  =If(
                                                      selectedBaseLinePrivilegeRecord.Organization <> cmbOrganization.Selected.Value,
                                                      UpdateContext({iscmbOrganizationChanged: true}),
                                                      UpdateContext({iscmbOrganizationChanged: false})
                                                  );
                                              Children:
                                                - Value34:
                                                    Control: ComboBoxDataField@1.5.0
                                                    Variant: textualColumn
                                                    IsLocked: true
                                                    Properties:
                                                      FieldDisplayName: ="Value"
                                                      FieldName: ="Value"
                                                      FieldType: ="l"
                                                      Order: =1
                                          - div_8:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="Buffer"
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - Container31_1:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =div_9.Y
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =8
                                          Visible: |-
                                            =If(
                                                !IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                If(
                                                    selectedBaseLinePrivilegeRecord.'Can Be Deep' = 'Can Be Deep (Privilege Risk Baselines)'.Yes,
                                                    true,
                                                    false
                                                ),
                                                If(
                                                    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                    selectedTablePrivilege.CanBeDeep,
                                                    selectedMiscellanousPrivilege.CanBeDeep
                                                )
                                            )
                                        Children:
                                          - Container23_4:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                BorderColor: =
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =20
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                              Children:
                                                - txtTable_2:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="Parent Child Business Unit"
                                                      Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                                      Width: =170
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - txtPrivilegeTypeRequired_4:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =RGBA(177, 14, 28, 1)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="*"
                                                      Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                      Width: =10
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - InfoButtonCanvas1_10:
                                                    Control: InfoButton@0.0.31
                                                    Properties:
                                                      AccessibleLabel: ="Info"
                                                      Content: ="Access to records owned by your Business Unit and its child units."
                                                      Height: =20
                                                      Width: =20
                                          - cmbPCBU:
                                              Control: ComboBox@0.0.49
                                              Properties:
                                                AccessibleLabel: ="PCBU risk ratings"
                                                AlignInContainer: =AlignInContainer.Stretch
                                                Appearance: ='ComboboxCanvas.Appearance'.FilledLighter
                                                BorderColor: =RGBA(209, 209, 209, 1)
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                DefaultSelectedItems: |-
                                                  =If(
                                                      IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                     Filter(
                                                          Choices('Parent Child Business Unit (Privilege Risk Baselines)'),
                                                          Value = 'Parent Child Business Unit (Privilege Risk Baselines)'.High
                                                      ),
                                                      Filter(
                                                          Choices('Parent Child Business Unit (Privilege Risk Baselines)'),
                                                          Value = LookUp(
                                                              'Privilege Risk Baselines',
                                                              'Privilege Risk Baseline' = selectedBaseLinePrivilegeRecord.'Privilege Risk Baseline'
                                                          ).'Parent Child Business Unit'
                                                      )
                                                  )
                                                Font: =Font.'Segoe UI'
                                                Items: =Sort(Choices('Parent Child Business Unit (Privilege Risk Baselines)'),Value,SortOrder.Descending)
                                                OnChange: |+
                                                  =
                                                  If(
                                                      selectedBaseLinePrivilegeRecord.'Parent Child Business Unit' <> cmbPCBU.Selected.Value,
                                                      UpdateContext({iscmbPCBUChanged: true}),
                                                      UpdateContext({iscmbPCBUChanged: false})
                                                  );
                                              Children:
                                                - Value35:
                                                    Control: ComboBoxDataField@1.5.0
                                                    Variant: textualColumn
                                                    IsLocked: true
                                                    Properties:
                                                      FieldDisplayName: ="Value"
                                                      FieldName: ="Value"
                                                      FieldType: ="l"
                                                      Order: =1
                                          - div_9:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="Buffer"
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - Container31_2:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =div_19.Y
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =8
                                          Visible: |-
                                            =If(
                                                !IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                If( selectedBaseLinePrivilegeRecord.'Can Be Basic' = 'Can Be Basic (Privilege Risk Baselines)'.Yes,
                                                    true,
                                                    false
                                                ),
                                                If(
                                                    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                    selectedTablePrivilege.CanBeBasic,
                                                   selectedMiscellanousPrivilege.CanBeBasic
                                                )
                                            )
                                        Children:
                                          - Container23_5:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                BorderColor: =
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =20
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                              Children:
                                                - txtTable_3:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="Business Unit"
                                                      Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                                      Width: =90
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - txtPrivilegeTypeRequired_5:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =RGBA(177, 14, 28, 1)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="*"
                                                      Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                      Width: =10
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - InfoButtonCanvas1_12:
                                                    Control: InfoButton@0.0.31
                                                    Properties:
                                                      AccessibleLabel: ="Info"
                                                      Content: ="Access to records owned within your assigned Business Unit only."
                                                      Height: =20
                                                      Width: =20
                                          - cmbBU:
                                              Control: ComboBox@0.0.49
                                              Properties:
                                                AccessibleLabel: ="BU risk ratings"
                                                AlignInContainer: =AlignInContainer.Stretch
                                                Appearance: ='ComboboxCanvas.Appearance'.FilledLighter
                                                BorderColor: =RGBA(209, 209, 209, 1)
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                DefaultSelectedItems: |-
                                                  =If(
                                                      IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                      Filter(
                                                          Choices('Business Unit (Privilege Risk Baselines)'),
                                                          Value = 'Business Unit (Privilege Risk Baselines)'.Moderate
                                                      ),
                                                      Filter(
                                                          Choices('Business Unit (Privilege Risk Baselines)'),
                                                          Value = LookUp(
                                                              'Privilege Risk Baselines',
                                                              'Privilege Risk Baseline' = selectedBaseLinePrivilegeRecord.'Privilege Risk Baseline'
                                                          ).'Business Unit'
                                                      )
                                                  )
                                                Font: =Font.'Segoe UI'
                                                Items: =Sort(Choices('Business Unit (Privilege Risk Baselines)'),Value,SortOrder.Descending)
                                                OnChange: |
                                                  =
                                                  If(
                                                      selectedBaseLinePrivilegeRecord.'Business Unit' <> cmbBU.Selected.Value,
                                                      UpdateContext({iscmbBUChanged: true}),
                                                      UpdateContext({iscmbBUChanged: false})
                                                  );
                                              Children:
                                                - Value36:
                                                    Control: ComboBoxDataField@1.5.0
                                                    Variant: textualColumn
                                                    IsLocked: true
                                                    Properties:
                                                      FieldDisplayName: ="Value"
                                                      FieldName: ="Value"
                                                      FieldType: ="l"
                                                      Order: =5
                                          - div_19:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="Buffer"
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - Container31_3:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          BorderColor: =
                                          BorderStyle: =BorderStyle.None
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =div_20.Y
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutGap: =8
                                          Visible: |-
                                            =If(
                                                !IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                If(
                                                    selectedBaseLinePrivilegeRecord.'Can Be Local' = 'Can Be Local (Privilege Risk Baselines)'.Yes,
                                                    true,
                                                    false
                                                ),
                                                If(
                                                    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                    selectedTablePrivilege.CanBeLocal,
                                                    selectedMiscellanousPrivilege.CanBeLocal
                                                )
                                            )
                                        Children:
                                          - Container23_6:
                                              Control: GroupContainer@1.3.0
                                              Variant: AutoLayout
                                              Properties:
                                                BorderColor: =
                                                BorderStyle: =BorderStyle.None
                                                DropShadow: =DropShadow.None
                                                FillPortions: =0
                                                Height: =20
                                                LayoutDirection: =LayoutDirection.Horizontal
                                                RadiusBottomLeft: =0
                                                RadiusBottomRight: =0
                                                RadiusTopLeft: =0
                                                RadiusTopRight: =0
                                              Children:
                                                - txtTable_4:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="User"
                                                      Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                                      Width: =30
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - txtPrivilegeTypeRequired_6:
                                                    Control: Text@0.0.50
                                                    Properties:
                                                      FontColor: =RGBA(177, 14, 28, 1)
                                                      Height: =LookUp(_typeramp,name="Body1Strong").lineHeight
                                                      PaddingBottom: =0
                                                      PaddingLeft: =0
                                                      PaddingRight: =0
                                                      PaddingTop: =0
                                                      Size: =LookUp(_typeramp,name="Body1Strong").fontSize
                                                      Text: ="*"
                                                      Weight: =LookUp(_typeramp,name="Body1Strong").fontWeight
                                                      Width: =10
                                                      Wrap: =false
                                                      X: =7
                                                      Y: =223
                                                - InfoButtonCanvas1_13:
                                                    Control: InfoButton@0.0.31
                                                    Properties:
                                                      AccessibleLabel: ="Info"
                                                      Content: ="Access to only records you own or are explicitly shared with you."
                                                      Height: =20
                                                      Width: =20
                                          - cmbUser:
                                              Control: ComboBox@0.0.49
                                              Properties:
                                                AccessibleLabel: ="User risk ratings"
                                                AlignInContainer: =AlignInContainer.Stretch
                                                Appearance: ='ComboboxCanvas.Appearance'.FilledLighter
                                                BorderColor: =RGBA(209, 209, 209, 1)
                                                BorderStyle: =BorderStyle.Solid
                                                BorderThickness: =1
                                                DefaultSelectedItems: |-
                                                  =If(
                                                      IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                      Filter(
                                                          Choices('User (Privilege Risk Baselines)'),
                                                          Value = 'User (Privilege Risk Baselines)'.Low
                                                      ),
                                                      Filter(
                                                          Choices('User (Privilege Risk Baselines)'),
                                                          Value = LookUp(
                                                              'Privilege Risk Baselines',
                                                              'Privilege Risk Baseline' = selectedBaseLinePrivilegeRecord.'Privilege Risk Baseline'
                                                          ).User
                                                      )
                                                  )
                                                Font: =Font.'Segoe UI'
                                                Items: |-
                                                  =Sort(
                                                      Choices('User (Privilege Risk Baselines)'),
                                                      Value,
                                                      SortOrder.Descending
                                                  )
                                                OnChange: |
                                                  =
                                                  If(
                                                      selectedBaseLinePrivilegeRecord.User <> cmbUser.Selected.Value,
                                                      UpdateContext({iscmbUserChanged: true}),
                                                      UpdateContext({iscmbUserChanged: false})
                                                  );
                                              Children:
                                                - Value37:
                                                    Control: ComboBoxDataField@1.5.0
                                                    Variant: textualColumn
                                                    IsLocked: true
                                                    Properties:
                                                      FieldDisplayName: ="Value"
                                                      FieldName: ="Value"
                                                      FieldType: ="l"
                                                      Order: =1
                                          - div_20:
                                              Control: Rectangle@2.3.0
                                              Properties:
                                                AccessibleLabel: ="Buffer"
                                                Fill: =RGBA(0,0,0,0)
                                                Height: =2
                                                Width: =Parent.Width - Self.X * 2
                                                X: =84
                                                Y: =256
                                    - cBuffer_10:
                                        Control: GroupContainer@1.3.0
                                        Variant: AutoLayout
                                        Properties:
                                          DropShadow: =DropShadow.None
                                          FillPortions: =0
                                          Height: =10
                                          LayoutDirection: =LayoutDirection.Vertical
                                          LayoutMinHeight: =10
                                          RadiusBottomLeft: =0
                                          RadiusBottomRight: =0
                                          RadiusTopLeft: =0
                                          RadiusTopRight: =0
                                          Width: =Parent.Width
                              - cBuffer_9:
                                  Control: GroupContainer@1.3.0
                                  Variant: AutoLayout
                                  Properties:
                                    DropShadow: =DropShadow.None
                                    FillPortions: =0
                                    Height: =10
                                    LayoutDirection: =LayoutDirection.Vertical
                                    LayoutMinHeight: =10
                                    RadiusBottomLeft: =0
                                    RadiusBottomRight: =0
                                    RadiusTopLeft: =0
                                    RadiusTopRight: =0
                                    Width: =Parent.Width
                        - cCardTitle_3:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =32
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =8
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =!showPrivilegeRiskContainer
                              Width: =Parent.Width
                              X: =1-1
                              Y: =1-1
                            Children:
                              - TextCanvas1_10:
                                  Control: Text@0.0.50
                                  Properties:
                                    FillPortions: =FlexOn
                                    Height: =24
                                    Size: =16
                                    Text: ="Select a privilege"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                                    Wrap: =false
                              - ButtonCanvas5_1:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Dismiss"
                                    Appearance: ='ButtonCanvas.Appearance'.Subtle
                                    Icon: ="Dismiss"
                                    OnSelect: |-
                                      =UpdateContext(
                                          {
                                              ctxTableEvent: "ClearSelection" & Text(Rand()),
                                              showPane: false
                                          }
                                      );
                                    Text: =
                                    Visible: =false
                                    Width: =32
                        - SelectPrivilegeContainer:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              LayoutDirection: =LayoutDirection.Vertical
                              LayoutGap: =12
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =!showPrivilegeRiskContainer
                            Children:
                              - txtSpecifyPrivileges:
                                  Control: Text@0.0.50
                                  Properties:
                                    Align: ='TextCanvas.Align'.Start
                                    AlignInContainer: =AlignInContainer.Stretch
                                    AutoHeight: =true
                                    FontColor: =ColorValue(AppTheme.palette.neutralPrimary)
                                    Height: =20//LookUp(_typeramp,name="Body1").lineHeight
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =LookUp(_typeramp,name="Body1").fontSize
                                    Text: ="Search privileges by display name or choose the table that it’s associated with. Misc is under global table option"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: =LookUp(_typeramp,name="Body1").fontWeight
                                    Width: =250
                                    X: =7
                                    Y: =188
                              - txtInputSearchTablePrivileges:
                                  Control: TextInput@0.0.53
                                  Properties:
                                    AccessibleLabel: ="Search tables"
                                    AlignInContainer: =AlignInContainer.Stretch
                                    Appearance: ='TextInputCanvas.Appearance'.FilledLighter
                                    BorderColor: =RGBA(209, 209, 209, 1)
                                    BorderStyle: =BorderStyle.Solid
                                    BorderThickness: =1
                                    Mode: ='TextInputCanvas.Mode'.SingleLine
                                    Placeholder: ="Keyword search"
                                    TriggerOutput: ='TextInputCanvas.TriggerOutput'.Keypress
                                    Type: ='TextInputCanvas.Type'.Search
                        - Container4_1:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =FlexOff
                              Height: =40
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =8
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =showPrivilegeRiskContainer
                              Width: =288
                              Y: =649
                            Children:
                              - btnSavePrivilegeRiskBaseline:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Save privilege"
                                    Appearance: ='ButtonCanvas.Appearance'.Primary
                                    DisplayMode: |-
                                      =If(
                                          !isNameUnique,
                                          DisplayMode.Disabled,
                                          If(/* Replace false with conditions for save */
                                              !isRadioGroupReadOnly && !IsBlankOrError(txtBody1_1.Text),
                                              DisplayMode.Edit,
                                              If(
                                                  iscmbOrganizationChanged || iscmbPCBUChanged || iscmbBUChanged || iscmbUserChanged || (!IsBlankOrError(txtBody1_1.Text) && (txtBody1_1.Text <> selectedBaseLinePrivilegeRecord.Name)),
                                                  DisplayMode.Edit,
                                                  DisplayMode.Disabled
                                              )
                                          )
                                      )
                                    OnSelect: |
                                      =UpdateContext(
                                          {
                                              init: false,
                                              spinnerColorForSettings: RGBA(
                                                  255,
                                                  255,
                                                  255,
                                                  0.7
                                              ),
                                              spinnerLabelForSettings: DVAssessmentPageLoc.pleaseWaitLoadingText,
                                              isExistingPrivilegeRiskBaseLineForSetting: Filter(
                                                  'Privilege Risk Baselines',
                                                  Name = txtBody1_1.Text && 'Risk Assessment Setting'.'Risk Assessment Setting' = lblSelectedAssessmentSettingId
                                              )
                                          }
                                      );
                                      If(
                                          IsBlankOrError(lblSelectedAssessmentSettingId),
                                          Set(
                                              currentSelectedAssessmentSetting,
                                              Patch(
                                                  'Risk Assessment Settings',
                                                  Defaults('Risk Assessment Settings'),
                                                  {Name: txtNameInput.Value}
                                              )
                                          );
                                          UpdateContext({lblSelectedAssessmentSettingId: currentSelectedAssessmentSetting.'Risk Assessment Setting'});
                                          If(
                                           // check if there were any errors when the risk assessment setting was submitted
                                              !IsEmpty(Errors('Risk Assessment Settings')),
                                           // if true, show any error message
                                              Notify(
                                                  Concat(
                                                      Errors('Risk Assessment Settings'),
                                                      Column & ": " & Message
                                                  ),
                                                  NotificationType.Error,
                                                  11111
                                              );
                                              UpdateContext(
                                                  {
                                                      init: true,
                                                      spinnerLabelForSettings: Blank(),
                                                      spinnerColorForSettings: Blank(),
                                                      createRiskSettingFailed: true
                                                  }
                                              ),
                                              UpdateContext(
                                                  {
                                                      lblName: txtNameInput.Value,
                                                      isNameValueChanged: false,
                                                      createRiskSettingFailed: false
                                                  }
                                              );
                                              If(
                                                  isNewButtonClicked,
                                                  Set(
                                                      isNewButtonClicked,
                                                      false
                                                  ),
                                                  true
                                              );
                                          ),
                                          false
                                      );
                                      If(
                                          CountRows(isExistingPrivilegeRiskBaseLineForSetting) > 0 && !isRadioGroupReadOnly,
                                          Notify(
                                              "Risk rating for this privilege already exists ",
                                              NotificationType.Error,
                                              5000
                                          );
                                          ,
                                          If(
                                              createRiskSettingFailed,
                                              false,
                                              If(
                                                  isRadioGroupReadOnly,// If true, it means existing record else new record creation
                                                  Patch(
                                                      'Privilege Risk Baselines',
                                                      If(
                                                          IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                          previousSelectedBaseLinePrivilegeRecord,
                                                          selectedBaseLinePrivilegeRecord
                                                      ),
                                                      {
                                                          Name: txtBody1_1.Text,
                                                          Organization: If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  If(
                                                                      selectedTablePrivilege.CanBeGlobal,
                                                                      cmbOrganization.Selected.Value,
                                                                      Blank()
                                                                  ),
                                                                  If(
                                                                      selectedMiscellanousPrivilege.CanBeGlobal,
                                                                      cmbOrganization.Selected.Value,
                                                                      Blank()
                                                                  )
                                                              ),
                                                              If(
                                                                  selectedBaseLinePrivilegeRecord.'Can Be Global',
                                                                  cmbOrganization.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          'Business Unit': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  If(
                                                                      selectedTablePrivilege.CanBeBasic,
                                                                      cmbBU.Selected.Value,
                                                                      Blank()
                                                                  ),
                                                                  If(
                                                                      selectedMiscellanousPrivilege.CanBeBasic,
                                                                      cmbBU.Selected.Value,
                                                                      Blank()
                                                                  )
                                                              ),
                                                              If(
                                                                  selectedBaseLinePrivilegeRecord.'Can Be Basic',
                                                                  cmbBU.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          'Parent Child Business Unit': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  If(
                                                                      selectedTablePrivilege.CanBeDeep,
                                                                      cmbPCBU.Selected.Value,
                                                                      Blank()
                                                                  ),
                                                                  If(
                                                                      selectedMiscellanousPrivilege.CanBeDeep,
                                                                      cmbPCBU.Selected.Value,
                                                                      Blank()
                                                                  )
                                                              ),
                                                              If(
                                                                  selectedBaseLinePrivilegeRecord.'Can Be Deep',
                                                                  cmbPCBU.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          User: If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  If(
                                                                      selectedTablePrivilege.CanBeLocal,
                                                                      cmbUser.Selected.Value,
                                                                      Blank()
                                                                  ),
                                                                  If(
                                                                      selectedMiscellanousPrivilege.CanBeLocal,
                                                                      cmbUser.Selected.Value,
                                                                      Blank()
                                                                  )
                                                              ),
                                                              If(
                                                                  selectedBaseLinePrivilegeRecord.'Can Be Local',
                                                                  cmbUser.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          Table: If(
                                                              IsBlankOrError(cmbTables.Selected.EntityDisplayName),
                                                              "N/A",
                                                              cmbTables.Selected.EntityDisplayName
                                                          ),
                                                          'Privilege Name': LookUp(
                                                              TableRelatedPrivileges,
                                                              PrivilegeFinalDisplayName = txtBody1_1.Text
                                                          ).PrivilegeName,
                                                          'Can Be Global': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  selectedTablePrivilege.CanBeGlobal,
                                                                  selectedMiscellanousPrivilege.CanBeGlobal
                                                              ),
                                                              selectedBaseLinePrivilegeRecord.'Can Be Global'
                                                          ),
                                                          'Can Be Deep': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  selectedTablePrivilege.CanBeDeep,
                                                                  selectedMiscellanousPrivilege.CanBeDeep
                                                              ),
                                                              selectedBaseLinePrivilegeRecord.'Can Be Deep'
                                                          ),
                                                          'Can Be Basic': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  selectedTablePrivilege.CanBeBasic,
                                                                  selectedMiscellanousPrivilege.CanBeBasic
                                                              ),
                                                              selectedBaseLinePrivilegeRecord.'Can Be Basic'
                                                          ),
                                                          'Can Be Local': If(
                                                              IsBlankOrError(selectedBaseLinePrivilegeRecord),
                                                              If(
                                                                  RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                                  selectedTablePrivilege.CanBeLocal,
                                                                  selectedMiscellanousPrivilege.CanBeLocal
                                                              ),
                                                              selectedBaseLinePrivilegeRecord.'Can Be Local'
                                                          )
                                                      }
                                                  );
                                                  UpdateContext(
                                                      {
                                                          iscmbBUChanged: false,
                                                          iscmbOrganizationChanged: false,
                                                          iscmbPCBUChanged: false,
                                                          iscmbUserChanged: false
                                                      }
                                                  ),
                                                  Patch(
                                                      'Privilege Risk Baselines',
                                                      Defaults('Privilege Risk Baselines'),
                                                      {
                                                          Name: If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.PrivilegeFinalDisplayName,
                                                              selectedMiscellanousPrivilege.DisplayName
                                                          ),
                                                          Organization: If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              If(
                                                                  selectedTablePrivilege.CanBeGlobal,
                                                                  cmbOrganization.Selected.Value,
                                                                  Blank()
                                                              ),
                                                              If(
                                                                  selectedMiscellanousPrivilege.CanBeGlobal,
                                                                  cmbOrganization.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          'Business Unit': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              If(
                                                                  selectedTablePrivilege.CanBeBasic,
                                                                  cmbBU.Selected.Value,
                                                                  Blank()
                                                              ),
                                                              If(
                                                                  selectedMiscellanousPrivilege.CanBeBasic,
                                                                  cmbBU.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          'Parent Child Business Unit': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              If(
                                                                  selectedTablePrivilege.CanBeDeep,
                                                                  cmbPCBU.Selected.Value,
                                                                  Blank()
                                                              ),
                                                              If(
                                                                  selectedMiscellanousPrivilege.CanBeDeep,
                                                                  cmbPCBU.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          User: If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              If(
                                                                  selectedTablePrivilege.CanBeLocal,
                                                                  cmbUser.Selected.Value,
                                                                  Blank()
                                                              ),
                                                              If(
                                                                  selectedMiscellanousPrivilege.CanBeLocal,
                                                                  cmbUser.Selected.Value,
                                                                  Blank()
                                                              )
                                                          ),
                                                          Table: If(
                                                              IsBlankOrError(cmbTables.Selected.EntityDisplayName),
                                                              "N/A",
                                                              cmbTables.Selected.EntityDisplayName
                                                          ),
                                                          Type: Substitute(
                                                              RadioGroupPrivilegeType.Selected.Value,
                                                              " privilege",
                                                              ""
                                                          ),
                                                          'Privilege Name': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.PrivilegeName,
                                                              selectedMiscellanousPrivilege.PrivilegeName
                                                          ),
                                                          'Risk Assessment Setting': LookUp(
                                                              'Risk Assessment Settings',
                                                              'Risk Assessment Setting' = lblSelectedAssessmentSettingId
                                                          ),
                                                          'Can Be Global': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.CanBeGlobal,
                                                              selectedMiscellanousPrivilege.CanBeGlobal
                                                          ),
                                                          'Can Be Deep': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.CanBeDeep,
                                                              selectedMiscellanousPrivilege.CanBeDeep
                                                          ),
                                                          'Can Be Basic': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.CanBeBasic,
                                                              selectedMiscellanousPrivilege.CanBeBasic
                                                          ),
                                                          'Can Be Local': If(
                                                              RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,
                                                              selectedTablePrivilege.CanBeLocal,
                                                              selectedMiscellanousPrivilege.CanBeLocal
                                                          )
                                                      }
                                                  )
                                              );
                                              If(
                                           // check if there were any errors when the Privilege risk baseline was submitted
                                                  !IsEmpty(Errors('Privilege Risk Baselines')),
                                           // if true, show any error message
                                                  Notify(
                                                      Concat(
                                                          Errors('Privilege Risk Baselines'),
                                                          Column & ": " & Message
                                                      ),
                                                      NotificationType.Error,
                                                      11111
                                                  );
                                                  ,
                                                  Notify(
                                                      DVAssessmentPageLoc.saveSettingsSuccessMessage,
                                                      NotificationType.Success,
                                                      5000
                                                  );
                                                  ClearCollect(
                                                      col_DistinctTablesToFilter_temp,
                                                      ForAll(
                                                          Sort(
                                                              Distinct(
                                                                  ActivePrivilegeRiskBaselinesRelatedToAProfile,
                                                                  Table
                                                              ),
                                                              Value,
                                                              SortOrder.Ascending
                                                          ),
                                                          {TableName: ThisRecord.Value}
                                                      )
                                                  );
                                                  ClearCollect(
                                                      col_DistinctTablesToFilter,
                                                      ForAll(
                                                          Sequence(CountRows(col_DistinctTablesToFilter_temp)),
                                                          Patch(
                                                              Last(
                                                                  FirstN(
                                                                      col_DistinctTablesToFilter_temp,
                                                                      Value
                                                                  )
                                                              ),
                                                              {Key: Value}
                                                          )
                                                      )
                                                  );
                                                  Collect(
                                                      col_DistinctTablesToFilter,
                                                      Table(
                                                          {
                                                              Key: 0,
                                                              TableName: "All"
                                                          }
                                                      )
                                                  );
                                                  ClearCollect(
                                                      col_RiskAssessmentsToBeUpdatedToStale,
                                                      Table(
                                                          ForAll(
                                                              Filter(
                                                                  'Risk Assessments',
                                                                  'Risk Assessments (Views)'.'All Risk Assessments',
                                                                  'Risk Assessment Setting'.'Risk Assessment Setting' = lblSelectedAssessmentSettingId,
                                                                  'Status Reason' <> 'Status Reason (Risk Assessments)'.Stale
                                                              ),
                                                              {Record: ThisRecord}
                                                          )
                                                      )
                                                  );
                                                  // Updating all the risk assessments to stale if any records exists
                                      If(
                                                      IsEmpty(col_RiskAssessmentsToBeUpdatedToStale),
                                                      UpdateContext({showStaleMessageBar: false}),
                                                      ForAll(
                                                          col_RiskAssessmentsToBeUpdatedToStale,
                                                          Patch(
                                                              'Risk Assessments',
                                                              ThisRecord.Record,
                                                              {
                                                                  Status: 'Status (Risk Assessments)'.Inactive,
                                                                  'Status Reason': 'Status Reason (Risk Assessments)'.Stale
                                                              }
                                                          )
                                                      );
                                                      UpdateContext(
                                                          {
                                                              showStaleMessageBar: true,
                                                              lblStaleMessageBarTitle: "Privilege updated successfully."
                                                          }
                                                      );
                                                  );
                                                  UpdateContext(
                                                      {
                                                          iscmbBUChanged: false,
                                                          iscmbOrganizationChanged: false,
                                                          iscmbPCBUChanged: false,
                                                          iscmbUserChanged: false,
                                                          selectedBaseLinePrivilegeRecord: Blank(),
                                                          previousSelectedBaseLinePrivilegeRecord: Blank(),
                                                          ctxPrivilegeTableEvent: "ClearSelection" & Text(Rand()),
                                                          showPane: false
                                                      }
                                                  );
                                              );
                                          )
                                      );
                                      UpdateContext(
                                          {
                                              init: true,
                                              spinnerColorForSettings: Blank(),
                                              spinnerLabelForSettings: Blank()
                                          }
                                      );
                                    Text: ="Save"
                              - btnCancelPrivilegeRiskBaseline:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Cancel"
                                    Appearance: ='ButtonCanvas.Appearance'.Secondary
                                    OnSelect: |
                                      =Reset(RadioGroupPrivilegeType);
                                      Reset(cmbTables);
                                      UpdateContext(
                                          {
                                              ctxPrivilegeTableEvent: "ClearSelection" & Text(Rand()),
                                              selectedBaseLinePrivilegeRecord: Blank(),
                                              selectedTablePrivilege: Blank(),
                                              previousSelectedBaseLinePrivilegeRecord:Blank(),
                                              selectedMiscellanousPrivilege: Blank(),
                                              ctxTableEvent: "ClearSelection" & Text(Rand()),
                                              showPane: false,
                                              isRadioGroupReadOnly: false,showPaneFullScreen:false
                                          }
                                      );
                                    Text: ="Cancel"
                        - SelectPrivilegeContainerButtons:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =FlexOff
                              Height: =40
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =8
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Visible: =!showPrivilegeRiskContainer
                              Width: =288
                              Y: =649
                            Children:
                              - btnDone:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Done"
                                    Appearance: ='ButtonCanvas.Appearance'.Primary
                                    DisplayMode: |-
                                      =If(
                                          CountRows(AllSelectedTableRelatedPrivileges.SelectedItems) > 0 || CountRows(AllCapabilityPrivilegesList.SelectedItems) > 0,
                                          DisplayMode.Edit,
                                          DisplayMode.Disabled
                                      )
                                    OnSelect: "=Reset(txtInputSearchTablePrivileges);\nUpdateContext(\n    {\n        selectedPrivilegeName: If(\n            RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,\n            AllSelectedTableRelatedPrivileges.Selected.PrivilegeFinalDisplayName,\n            AllCapabilityPrivilegesList.Selected.DisplayName\n        )\n    }\n);\nIf(\n    !IsBlankOrError(selectedBaseLinePrivilegeRecord),\n    UpdateContext({previousSelectedBaseLinePrivilegeRecord: selectedBaseLinePrivilegeRecord});\n    ,\n    false\n);\nIf(\n    IsBlankOrError(selectedBaseLinePrivilegeRecord) && selectedPrivilegeName = previousSelectedBaseLinePrivilegeRecord.Name,\n    UpdateContext({selectedBaseLinePrivilegeRecord: previousSelectedBaseLinePrivilegeRecord}),\n    UpdateContext({selectedBaseLinePrivilegeRecord: Blank()})\n);\nUpdateContext(\n    {\n        showSelectedPrivilege: true,\n        selectedTablePrivilege: AllSelectedTableRelatedPrivileges.Selected,\n        selectedMiscellanousPrivilege: AllCapabilityPrivilegesList.Selected,\n        showPrivilegeRiskContainer: !showPrivilegeRiskContainer\n    }\n);\nConcurrent(\n    Reset(cmbOrganization),\n    Reset(cmbPCBU),\n    Reset(cmbBU),\n    Reset(cmbUser)\n);\nIf(\n    RadioGroupPrivilegeType.Selected.Value = TablePrivilegeText,\n    If(\n        CountRows(\n            Filter(\n                TableRelatedPrivileges,\n                RecordSelected = true\n            )\n        ) > 0,\n        ForAll(\n            Filter(\n                TableRelatedPrivileges,\n                RecordSelected = true\n            ),\n            Patch(\n                TableRelatedPrivileges,\n                ThisRecord,\n                {RecordSelected: false}\n            );\n        ),\n        false\n    );\n    Patch(\n        TableRelatedPrivileges,\n        LookUp(\n            TableRelatedPrivileges,\n            PrivilegeId = AllSelectedTableRelatedPrivileges.Selected.PrivilegeId\n        ),\n        {RecordSelected: true}\n    );\n    UpdateContext({ctxTableEvent: \"ClearSelection\" & Text(Rand())});\n    ,// Capability privilege\n    If(\n        CountRows(\n            Filter(\n                MiscellaneousPrivileges,\n                RecordSelected = true\n            )\n        ) > 0,\n        ForAll(\n            Filter(\n                MiscellaneousPrivileges,\n                RecordSelected = true\n            ),\n            Patch(\n                MiscellaneousPrivileges,\n                ThisRecord,\n                {RecordSelected: false}\n            );\n        ),\n        false\n    );\n    Patch(\n        MiscellaneousPrivileges,\n        LookUp(\n            MiscellaneousPrivileges,\n            ComponentId = AllCapabilityPrivilegesList.Selected.ComponentId\n        ),\n        {RecordSelected: true}\n    );\n    UpdateContext({ctxTableEvent: \"ClearSelection\" & Text(Rand())});\n    \n);\n"
                                    Text: ="Done"
                              - btnCancelPrivilegeRiskBaseline_1:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Cancel privilege"
                                    Appearance: ='ButtonCanvas.Appearance'.Secondary
                                    OnSelect: |
                                      =Reset(txtInputSearchTablePrivileges);
                                      UpdateContext(
                                          {
                                              showPrivilegeRiskContainer: !showPrivilegeRiskContainer,
                                              ctxTableEvent: "ClearSelection" & Text(Rand())
                                          }
                                      );
                                    Text: ="Cancel"
      - cDeleteDialog:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =ColorValue($"{AppTheme.palette.black}AA")
            Height: =Parent.Height
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Vertical
            LayoutJustifyContent: =LayoutJustifyContent.Center
            Visible: =showDeleteConfirmationDialog
            Width: =Parent.Width
          Children:
            - Container19_1:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  AlignInContainer: =AlignInContainer.SetByContainer
                  DropShadow: =DropShadow.Regular
                  Fill: =Color.White
                  FillPortions: =0
                  Height: =250
                  LayoutDirection: =LayoutDirection.Vertical
                  LayoutGap: =8
                  PaddingBottom: =24
                  PaddingLeft: =24
                  PaddingRight: =24
                  PaddingTop: =24
                  RadiusBottomLeft: =8
                  RadiusBottomRight: =8
                  RadiusTopLeft: =8
                  RadiusTopRight: =8
                  Width: =600
                Children:
                  - Container38:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        BorderColor: =
                        BorderStyle: =BorderStyle.None
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutJustifyContent: =LayoutJustifyContent.Center
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =showSpinnerForConfirmationDialog
                        Width: =Parent.Width
                      Children:
                        - Spinner3:
                            Control: Spinner@1.4.6
                            Properties:
                              AccessibleLabel: ="Deleting risk rating..."
                              Label: ="Deleting risk rating..."
                              LabelPosition: ='Spinner.LabelPosition'.Below
                  - Container24_2:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        AlignInContainer: =AlignInContainer.Center
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =div_22.Y
                        LayoutDirection: =LayoutDirection.Vertical
                        PaddingLeft: =24
                        PaddingRight: =24
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =!showSpinnerForConfirmationDialog
                        Width: =Parent.Width
                      Children:
                        - Container26:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              BorderColor: =
                              BorderStyle: =BorderStyle.None
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =32
                              LayoutDirection: =LayoutDirection.Horizontal
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                            Children:
                              - TextCanvas2_2:
                                  Control: Text@0.0.50
                                  Properties:
                                    AlignInContainer: =AlignInContainer.Start
                                    FillPortions: =1
                                    Size: =20
                                    Text: ="Confirm deletion"
                                    VerticalAlign: =VerticalAlign.Middle
                                    Weight: ='TextCanvas.Weight'.Semibold
                              - ButtonCanvas2:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Dismiss"
                                    Appearance: ='ButtonCanvas.Appearance'.Transparent
                                    Icon: ="Dismiss"
                                    Layout: ='ButtonCanvas.Layout'.IconOnly
                                    OnSelect: =UpdateContext({showDeleteConfirmationDialog:false});
                                    Width: =25
                        - txtConfirmation:
                            Control: FluentV8/Label@1.8.6
                            Properties:
                              AutoHeight: =true
                              FontSize: =16 * 0.725
                              Text: ="Are you sure you want to delete this privilege from the risk matrix? This action cannot be undone."
                              Width: =Parent.Width - Self.X * 2
                        - txtImpactWarning:
                            Control: HtmlViewer@2.1.0
                            Properties:
                              AlignInContainer: =AlignInContainer.Stretch
                              AutoHeight: =true
                              Font: =Font.'Segoe UI'
                              HtmlText: |-
                                ="<b>Impact warning</b>: <span style=color:RGBA(36,36,36,1)>Removing this privilege may affect compliance checks and risk assessments for security roles. Current risk assessments will be outdated. You must manually re-scan to ensure immediate compliance.</span>"
                              Size: =11.6
                        - div_22:
                            Control: Rectangle@2.3.0
                            Properties:
                              AccessibleLabel: ="Buffer"
                              Fill: =RGBA(0,0,0,0)
                              Height: =2
                              Width: =Parent.Width - Self.X * 2
                              X: =84
                              Y: =256
                  - Container24_3:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        DropShadow: =DropShadow.None
                        FillPortions: =0
                        Height: =45
                        LayoutAlignItems: =LayoutAlignItems.Center
                        LayoutDirection: =LayoutDirection.Horizontal
                        PaddingLeft: =24
                        PaddingRight: =24
                        RadiusBottomLeft: =0
                        RadiusBottomRight: =0
                        RadiusTopLeft: =0
                        RadiusTopRight: =0
                        Visible: =!showSpinnerForConfirmationDialog
                      Children:
                        - Container21_3:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              Height: =44
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =8
                              LayoutJustifyContent: =LayoutJustifyContent.End
                              LayoutMinHeight: =32
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                              Width: =253
                              X: =Parent.Width - Self.Width - 16
                              Y: =16
                            Children:
                              - btnCancel:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Cancel"
                                    OnSelect: =UpdateContext({showDeleteConfirmationDialog:false});
                                    Text: ="Cancel"
                                    Width: =84
                                    X: =375
                              - btnDelete:
                                  Control: Button@0.0.44
                                  Properties:
                                    AccessibleLabel: ="Notnow"
                                    Appearance: ='ButtonCanvas.Appearance'.Secondary
                                    OnSelect: "=UpdateContext({showSpinnerForConfirmationDialog: true});\nRemove(\n    'Privilege Risk Baselines',\n    PrivilegeRiskBaselineList.Selected\n);\nClearCollect(\n    col_RiskAssessmentsToBeUpdatedToStale,\n    Table(\n        ForAll(\n            Filter(\n                'Risk Assessments',\n                'Risk Assessments (Views)'.'All Risk Assessments',\n                'Risk Assessment Setting'.'Risk Assessment Setting' = lblSelectedAssessmentSettingId,\n                'Status Reason' <> 'Status Reason (Risk Assessments)'.Stale\n            ),\n            {Record: ThisRecord}\n        )\n    )\n);\n// Updating all the risk assessments to stale if any records exists\nIf(\n    IsEmpty(col_RiskAssessmentsToBeUpdatedToStale),\n    UpdateContext({showStaleMessageBar: false}),\n    ForAll(\n        col_RiskAssessmentsToBeUpdatedToStale,\n        Patch(\n            'Risk Assessments',\n            ThisRecord.Record,\n            {\n                Status: 'Status (Risk Assessments)'.Inactive,\n                'Status Reason': 'Status Reason (Risk Assessments)'.Stale\n            }\n        )\n    );\n    UpdateContext(\n        {\n            showStaleMessageBar: true,\n            lblStaleMessageBarTitle: \"Privilege deleted successfully.\"\n        }\n    );\n    \n);\nUpdateContext(\n    {\n        showSpinnerForConfirmationDialog: false,\n        showDeleteConfirmationDialog: false\n    }\n);\n"
                                    Text: ="Delete"
                                    Width: =84
                                    X: =301
      - cSpinner_3:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =If(IsBlankOrError(spinnerColorForSettings),ColorValue("#fafafa"),spinnerColorForSettings)
            Height: =Parent.Height
            LayoutDirection: =LayoutDirection.Vertical
            Visible: =init <> true
            Width: =Parent.Width
          Children:
            - Spinner1_3:
                Control: Spinner@1.4.6
                Properties:
                  AccessibleLabel: ="Spinner"
                  Height: =Parent.Height
                  Label: =spinnerLabelForSettings
                  SpinnerSize: ='Spinner.SpinnerSize'.Large
                  Width: =Parent.Width
      - DVRetrieveEntityDefinitions:
          Control: CodeComponent
          ComponentName: cat_PowerCAT.DVAPITester
          Properties:
            Data: ="{}"
            Height: =1
            OnChange: |
              =UpdateContext(
                  {
                      entityDefinitionsAPIresponse: With(
                          {r: ParseJSON(Text(Self.OutputString))},
                          JSON(r.value)
                      )
                  }
              );
              ClearCollect(
                  EntityDefinitionsResponse,
                  Table({EntityDefinitions: Table(ParseJSON(entityDefinitionsAPIresponse))})
              );
              ClearCollect(
                  col_EntityDefinitions,
                  {
                      EntityDefinitions: ForAll(
                          Table(First(EntityDefinitionsResponse).EntityDefinitions),
                          {
                              EntityLogicalName: Text(ThisRecord.Value.LogicalName),
                              IsActivity: ThisRecord.Value.IsActivity,
                              LocalizedLabels: ForAll(
                                  ThisRecord.Value.DisplayName.LocalizedLabels,
                                  {
                                      EntityMetadataId: GUID(ThisRecord.MetadataId),
                                      Label: Text(ThisRecord.Label),
                                      LanguageCode: ThisRecord.LanguageCode
                                  }
                              ),
                              EntityPrivileges: ForAll(
                                  ThisRecord.Value.Privileges,
                                  {
                                      PrivilegeId: GUID(ThisRecord.PrivilegeId),
                                      PrivilegeName: Text(ThisRecord.Name),
                                      PrivilegeType: Text(ThisRecord.PrivilegeType),
                                      CanBeBasic: Boolean(ThisRecord.CanBeBasic),
                                      CanBeGlobal: Boolean(ThisRecord.CanBeGlobal),
                                      CanBeDeep: Boolean(ThisRecord.CanBeDeep),
                                      CanBeLocal: Boolean(ThisRecord.CanBeLocal)
                                  }
                              ),
                              MetadataId: GUID(ThisRecord.Value.MetadataId)
                          }
                      )
                  }
              );
              ClearCollect(
                  EntityDisplayNames,
                  ForAll(
                      Table(
                          Filter(
                              First(col_EntityDefinitions).EntityDefinitions,
                              (EntityLogicalName <> "cat_riskassessment" && EntityLogicalName <> "cat_riskassessmentsetting" && EntityLogicalName <> "cat_privilegeriskbaseline")
                          )
                      ),
                      {
                          MetadataId: ThisRecord.MetadataId,
                          EntityLogicalName: Text(ThisRecord.EntityLogicalName),
                          EntityDisplayName: LookUp(
                              ThisRecord.LocalizedLabels,
                              LanguageCode = 1033
                          ).Label,
                          EntityPrivileges: ThisRecord.EntityPrivileges
                      }
                  )
              );
            RequestID: =Rand()
            RequestURL: ="/api/data/v9.0/EntityDefinitions?$select=Privileges,DisplayName,ObjectTypeCode,LogicalName,IsChildEntity,IsCustomizable,IsManaged,IsCustomEntity,IsBPFEntity,IsActivity,OwnershipType&api-version=9.1"
            Trigger: =triggerRetrieveEntityDefinitions
            Width: =1
            X: =60
            Y: =60
      - DVRetrieveMiscellaneousPrivileges:
          Control: CodeComponent
          ComponentName: cat_PowerCAT.DVAPITester
          Properties:
            Data: ="{}"
            Height: =1
            OnChange: |
              =Set(
                  roleEditorLayoutResponse,
                  With(
                      {r: ParseJSON(Text(Self.OutputString))},
                      JSON(r.value)
                  )
              );
              ClearCollect(
                  MiscellaneousPrivileges_temp,
                  Table({MiscellaneousPrivileges: Table(ParseJSON(roleEditorLayoutResponse))})
              );
              ClearCollect(
                  MiscellaneousPrivileges,
                  AddColumns(
                      ForAll(
                          Table(First(MiscellaneousPrivileges_temp).MiscellaneousPrivileges),
                          {
                              DisplayName: Text(ThisRecord.Value.displayname),
                              ItemType: Value(ThisRecord.Value.itemtype),
                              LogicalName: Substitute(
                                  Text(ThisRecord.Value.name),
                                  "prv",
                                  ""
                              ),
                              PrivilegeName: Text(ThisRecord.Value.privilegename),
                              ComponentId: GUID(ThisRecord.Value.componentidunique),
                              RoleEditorLayoutId: GUID(ThisRecord.Value.roleeditorlayoutid),
                              RoleEditorHiererachyId: GUID(ThisRecord.Value._roleeditorlayouthierarchyid_value),
                              RecordSelected: false
                          }
                      ),
                      CanBeGlobal,
                      LookUp(
                          Privileges,
                          Name = PrivilegeName
                      ).CanBeGlobal,
                      CanBeDeep,
                      LookUp(
                          Privileges,
                          Name = PrivilegeName
                      ).CanBeDeep,
                      CanBeBasic,
                      LookUp(
                          Privileges,
                          Name = PrivilegeName
                      ).CanBeBasic,
                      CanBeLocal,
                      LookUp(
                          Privileges,
                          Name = PrivilegeName
                      ).CanBeLocal
                  )
              );
            RequestID: =Rand()
            RequestURL: ="/api/data/v9.0/roleeditorlayouts?$select=displayname,name,entitylogicalname,privilegename,roleeditorlayoutid,itemtype,_roleeditorlayouthierarchyid_value,componentidunique&$filter=itemtype%20eq%205"
            Trigger: =triggerRetrieveMiscellaneousPrivileges
            Width: =1
            X: =40
            Y: =40
